<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Vincent Larmet" />

<meta name="date" content="2022-11-28" />

<title>cppRouting</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>







<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">cppRouting</h1>
<h4 class="author">Vincent Larmet</h4>
<h4 class="date">2022-11-28</h4>



<div id="package-presentation" class="section level1">
<h1>Package presentation</h1>
<p><code>cppRouting</code> is an <code>R</code> package which provide <strong>routing</strong> algorithms (shortest paths/distances, isochrones) and <strong>traffic assignment</strong> solvers on non-negative weighted graphs.<br />
<code>cppRouting</code> is characterized by :</p>
<ul>
<li>its ability to work on large road graphs (country/continent scale)</li>
<li>its large choice of <code>one-to-one</code> shortest path algorithms</li>
<li>its implementation of <strong>contraction hierarchies</strong> and associated routing algorithms</li>
<li>its large choice of algorithms for solving the <strong>traffic assignment problem (TAP)</strong></li>
<li>its high performance through memory usage and parallel programming</li>
</ul>
<p><code>cppRouting</code> is therefore particularly adapted for geographer, or whoever who need to calculate accessibility indicators at large scale.<br />
All algorithms are written in C++ and mainly use containers from the Standard Template Library (STL).<br />
This package have been made with <code>Rcpp</code> and <code>RcppParallel</code> packages.</p>
</div>
<div id="main-functions" class="section level1">
<h1>Main functions</h1>
<p><code>cppRouting</code> package provide these functions :</p>
<ul>
<li><code>get_distance_matrix</code> : compute distance matrix (between all combinations origin-destination nodes - <em>one-to-many</em>),<br />
</li>
<li><code>get_distance_pair</code> : compute distances between origin and destination by pair (<em>one-to-one</em>),<br />
</li>
<li><code>get_path_pair</code> : compute shortest paths between origin and destination by pair (<em>one-to-one</em>),<br />
</li>
<li><code>get_multi_paths</code> : compute shortest paths between all origin nodes and all destination nodes (<em>one-to-many</em>),<br />
</li>
<li><code>get_isochrone</code> : compute isochrones/isodistances with one or multiple breaks.<br />
</li>
<li><code>get_detour</code> : return nodes that are reachable within a fixed additional cost around shortest paths. This function can be useful in producing accessibility indicators.<br />
</li>
<li><code>cpp_simplify</code> : remove non-intersection nodes, duplicated edges and isolated loops in the graph. Graph topology is preserved so distance calculation is faster and remains true. This function can be applied to very large graphs (several millions of nodes).<br />
</li>
<li><code>cpp_contract</code> : contract the graph by applying <strong>contraction hierarchies</strong> algorithm.<br />
</li>
<li><code>get_aon</code> : given an origin-destination matrix, compute All-or-Nothing assignment.<br />
</li>
<li><code>assign_traffic</code> : given an origin-destination matrix, estimate the traffic flows on the network.</li>
</ul>
<div id="routing-algorithms" class="section level2">
<h2>Routing algorithms</h2>
<p>Path algorithms proposed by the package are :</p>
<ul>
<li><strong>1</strong> uni-directional Dijkstra algorithm,</li>
<li><strong>2</strong> bi-directional Dijkstra algorithm,</li>
<li><strong>3</strong> uni-directional A* algorithm<br />
</li>
<li><strong>4</strong> New bi-directional A* algorithm (Piljs &amp; Post, 2009 : see <a href="https://repub.eur.nl/pub/16100/ei2009-10.pdf" class="uri">https://repub.eur.nl/pub/16100/ei2009-10.pdf</a>)</li>
<li><strong>5</strong> <em>one-to-one</em> bi-directional Dijkstra adapted to contraction hierarchies (Geisberger &amp; al., 2008)</li>
<li><strong>6</strong> <em>many-to-many</em> bi-directional Dijkstra adapted to contraction hierarchies (Geisberger &amp; al., 2008)</li>
<li><strong>7</strong> PHAST algorithm (Hardware-accelerated shortest path trees), <em>one-to-all</em> algorithm adapted to contraction hierarchies (Delling &amp; al., 2011)</li>
</ul>
<p><em>1</em>, <em>2</em>, <em>3</em> and <em>4</em> are available for <strong>one-to-one</strong> calculation in <code>get_distance_pair</code> and <code>get_path_pair</code> functions on a <strong>non-contracted</strong> graph. In these functions, uni-directional Dijkstra algorithm is stopped when the destination node is reached.<br />
<code>A*</code> and <code>NBA*</code> are relevant if geographic coordinates of all nodes are provided. Note that coordinates should be expressed in a <strong>projection system</strong>.<br />
To be accurate and efficient, <code>A*</code> and <code>NBA*</code> algorithms should use an admissible heuristic function (here the Euclidean distance), i.e cost and heuristic function must be expressed in the same unit.<br />
In <code>cppRouting</code>, heuristic function <code>h</code> for a node (n) is defined such that :<br />
<strong>h(n,d) = ED(n,d) / k</strong> with <em>h</em> the heuristic, <em>ED</em> the Euclidean distance, <em>d</em> the destination node and a constant <em>k</em>.<br />
So in the case where coordinates are expressed in meters and cost is expressed in time, <em>k</em> is the maximum speed allowed on the road. By default, constant is 1 and is designed for graphs with cost expressed in the same unit than coordinates (for example in meters).<br />
If coordinates cannot be provided, bi-directional Dijkstra algorithm is the best option in terms of performance.</p>
<p><em>5</em> is used for <strong>one-to-one</strong> calculation in <code>get_distance_pair</code> and <code>get_path_pair</code> functions on a <strong>contracted</strong> graph.</p>
<p><em>1</em> is used for <strong>one-to-many</strong> calculation in <code>get_distance_matrix</code> function on a <strong>non-contracted</strong> graph.</p>
<p><em>6</em> and <em>7</em> are available for <strong>one-to-many</strong> calculation in <code>get_distance_matrix</code> function on a <strong>contracted</strong> graph.</p>
</div>
<div id="traffic-assignment-algorithms" class="section level2">
<h2>Traffic assignment algorithms</h2>
<p>Traffic assignment models are used to estimate the traffic flows on a network. It take as input origin-destinations matrix describing volume between each OD pair.</p>
<div id="all-or-nothing-aon" class="section level3">
<h3>All-or-Nothing (AON)</h3>
<p>All-or-Nothing assignment (AON) is the most simplistic (and fastest) method to load flow on a network, since it assume there is no congestion effects. The assignment algorithm itself is the procedure that loads the origin-destination matrix to the shortest path trees and produces the flows.<br />
In <code>cppRouting</code>, OD matrix is represented as 3 vectors of equal length :<br />
- <code>from</code> : origin node,<br />
- <code>to</code> : destination node,<br />
- <code>demand</code> : volume.</p>
</div>
<div id="user-equilibrium-ue" class="section level3">
<h3>User Equilibrium (UE)</h3>
<p>The term “User Equilibrium” is used to describe a route choice assumption formally proposed by <a href="doi:10.1680/ipeds.1952.11362">Wardrop</a> :<br />
<strong>“The journey times on all the routes actually used are equal and less than those which would be experienced by a single vehicle on any unused routes”</strong>.<br />
Note that this principle follows directly from the assumptions that drivers choose minimum time paths, and are well-informed about network conditions.</p>
<p>Unlike AON assignment, this more realistic way to assign flows on a network take into account <strong>congestion effect</strong>. In this paradigm, the cost of a given link is dependent of the flow on it.</p>
<p>Algorithms proposed by <code>cppRouting</code> for solving UE are :<br />
- link-based : <strong>Method of Successive Average (MSA)</strong>, <strong>Frank-Wolfe algorithms (including Conjugate and Bi conjugate variants)</strong>,<br />
- bush-based : <strong>Algorithm B</strong></p>
</div>
</div>
</div>
<div id="examples-and-applications-using-cpprouting" class="section level1">
<h1>Examples and applications using <code>cppRouting</code></h1>
<p>see : <a href="https://github.com/vlarmet/cppRouting/blob/master/README.md" class="uri">https://github.com/vlarmet/cppRouting/blob/master/README.md</a></p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
